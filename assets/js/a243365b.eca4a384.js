(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{102:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return d}));var r=n(3),o=n(7),a=(n(0),n(120)),i={sidebar_position:2},c={unversionedId:"design-documents/cfr",id:"design-documents/cfr",isDocsHomePage:!1,title:"Common Flutter Runtime (CFR)",description:"https://github.com/hydro-sdk/hydro-sdk/tree/master/lib/cfr",source:"@site/docs/design-documents/cfr.md",sourceDirName:"design-documents",slug:"/design-documents/cfr",permalink:"/docs/design-documents/cfr",editUrl:"https://github.com/hydro-sdk/hydro-sdk.io/edit/main/docs/design-documents/cfr.md",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Structured Wrapper and Interface Generator for Dart (SWID)",permalink:"/docs/design-documents/swid"},next:{title:"Over the Air (OTA) Package Files",permalink:"/docs/design-documents/ota"}},u=[{value:"Objective",id:"objective",children:[]},{value:"Background",id:"background",children:[]},{value:"Virtual Machine",id:"virtual-machine",children:[]},{value:"Runtime",id:"runtime",children:[]}],s={toc:u};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://github.com/hydro-sdk/hydro-sdk/tree/master/lib/cfr"},"https://github.com/hydro-sdk/hydro-sdk/tree/master/lib/cfr")),Object(a.b)("h2",{id:"objective"},"Objective"),Object(a.b)("p",null,"Provide a virtual machine and runtime environment based on PUC-RIO Lua 5.2 that can cleanly interop with Dart and Flutter."),Object(a.b)("h2",{id:"background"},"Background"),Object(a.b)("p",null,"Lua is a dynamically typed, table based language. Though somewhat niche, Lua's relative simplicity and small footprint have made it popular as an embedded scripting environment for larger applications. Particularly in video games."),Object(a.b)("h2",{id:"virtual-machine"},"Virtual Machine"),Object(a.b)("p",null,"The CFR virtual machine is an implementation of a subset of a PUC-RIO Lua 5.2 environment. It provides an interpreter for Lua 5.2 bytecode and a small set of intrinsic functions supporting common Lua 5.2 operations. The interpreter support function-mapping and hot-reload through the use of debugging symbols."),Object(a.b)("h2",{id:"runtime"},"Runtime"),Object(a.b)("p",null,"The CFR runtime binding system is based on Lua calling conventions. The runtime and virtual machine cooperate to allow for binding Dart objects contained in virtual registers or memory with Lua tables. The runtime supports safely downcasting and unmarshalling Dart objects bound to Lua tables back into regular Dart objects to be passed to Dart APIs that don't know about the CFR."))}d.isMDXComponent=!0},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),d=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},l=function(e){var t=d(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),l=d(n),m=r,b=l["".concat(i,".").concat(m)]||l[m]||p[m]||a;return n?o.a.createElement(b,c(c({ref:t},s),{},{components:n})):o.a.createElement(b,c({ref:t},s))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);